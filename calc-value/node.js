const data = {
    "text": "root",
    "sizeValue": 1,
    "recordId": "root",
    "hasChildren": true,
    "row": {
        "headerId": "",
        "text": "",
        "cellType": "Empty",
        "displayType": "line"
    },
    "column": {
        "headerId": "sizeValue",
        "text": "",
        "cellType": "Empty",
        "displayType": "nested"
    },
    "value": 0,
    "children": [
        {
            "text": "Experience",
            "sizeValue": 75,
            "colorValue": 1.9848484848484849,
            "recordId": "/1/",
            "hasChildren": true,
            "row": {
                "headerId": "10",
                "text": "",
                "cellType": "ListRow",
                "displayType": "line"
            },
            "column": {
                "headerId": "sizeValue",
                "text": "",
                "cellType": "Empty",
                "displayType": "nested"
            },
            "hierarchyKey": "[\"c147094\"]",
            "value": 0,
            "children": [
                {
                    "text": "Finding help",
                    "sizeValue": 3,
                    "colorValue": -4.333333333333333,
                    "recordId": "/1/4/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147098\"]",
                    "value": 0.009406354515050166
                },
                {
                    "text": "Finding items",
                    "sizeValue": 44,
                    "colorValue": 1.077922077922078,
                    "recordId": "/1/3/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147097\"]",
                    "value": 0.13795986622073578
                },
                {
                    "text": "Quality of service",
                    "sizeValue": 6,
                    "colorValue": 5,
                    "recordId": "/1/1/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147095\"]",
                    "value": 0.018812709030100332
                },
                {
                    "text": "Speed of service",
                    "sizeValue": 37,
                    "colorValue": 2.343283582089552,
                    "recordId": "/1/6/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147100\"]",
                    "value": 0.11601170568561872
                },
                {
                    "text": "Staff availability",
                    "sizeValue": 2,
                    "colorValue": -5,
                    "recordId": "/1/5/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147099\"]",
                    "value": 0.006270903010033444
                }
            ]
        },
        {
            "text": "Staff",
            "sizeValue": 176,
            "colorValue": 2.6084142394822005,
            "recordId": "/3/",
            "hasChildren": true,
            "row": {
                "headerId": "10",
                "text": "",
                "cellType": "ListRow",
                "displayType": "line"
            },
            "column": {
                "headerId": "sizeValue",
                "text": "",
                "cellType": "Empty",
                "displayType": "nested"
            },
            "hierarchyKey": "[\"c147115\"]",
            "value": 0,
            "children": [
                {
                    "text": "Associate",
                    "sizeValue": 176,
                    "colorValue": 2.6084142394822005,
                    "recordId": "/3/1/",
                    "hasChildren": true,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147116\"]",
                    "value": 0.661880341880342
                },
                {
                    "text": "Manager",
                    "sizeValue": 4,
                    "colorValue": 5,
                    "recordId": "/3/2/",
                    "hasChildren": true,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147117\"]",
                    "value": 0.015042735042735044
                }
            ]
        },
        {
            "text": "Store",
            "sizeValue": 9,
            "colorValue": 0.625,
            "recordId": "/2/",
            "hasChildren": true,
            "row": {
                "headerId": "10",
                "text": "",
                "cellType": "ListRow",
                "displayType": "line"
            },
            "column": {
                "headerId": "sizeValue",
                "text": "",
                "cellType": "Empty",
                "displayType": "nested"
            },
            "hierarchyKey": "[\"c147103\"]",
            "value": 0,
            "children": [
                {
                    "text": "Cleanliness",
                    "sizeValue": 1,
                    "colorValue": 5,
                    "recordId": "/2/1/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147104\"]",
                    "value": 0.0038461538461538464
                },
                {
                    "text": "Display",
                    "sizeValue": 4,
                    "colorValue": 0.7142857142857143,
                    "recordId": "/2/7/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147110\"]",
                    "value": 0.015384615384615385
                },
                {
                    "text": "Greeting",
                    "sizeValue": 3,
                    "colorValue": 1,
                    "recordId": "/2/4/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147107\"]",
                    "value": 0.011538461538461539
                },
                {
                    "text": "Size",
                    "sizeValue": 1,
                    "colorValue": -5,
                    "recordId": "/2/8/",
                    "hasChildren": false,
                    "row": {
                        "headerId": "10",
                        "text": "",
                        "cellType": "ListRow",
                        "displayType": "line"
                    },
                    "column": {
                        "headerId": "sizeValue",
                        "text": "",
                        "cellType": "Empty",
                        "displayType": "nested"
                    },
                    "hierarchyKey": "[\"c147111\"]",
                    "value": 0.0038461538461538464
                }
            ]
        }
    ]
}

const shouldFetch = (node, height) => {
    if (!node.hasChildren) {
        return false;
    }

    if (!node.children) {
        return !!height;
    }

    return node.children.some(child => shouldFetch(child, height - 1));
}

const a = shouldFetch(data.children[1], 2)

debugger